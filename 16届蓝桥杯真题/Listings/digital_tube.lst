C51 COMPILER V9.57.0.0   DIGITAL_TUBE                                                      01/27/2026 21:31:21 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE DIGITAL_TUBE
OBJECT MODULE PLACED IN .\Objects\digital_tube.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE digital_tube.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\digital_tube.lst) OBJECT(.\Objects\digital_tube.obj)

line level    source

   1          #include <STC15F2K60S2.H>
   2          #include "delay.h"
   3          
   4          
   5          unsigned char digital_tubenumber[16]={0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0x88,0x83,0xC6,0xA
             -1,0x86,0x8E};
   6          
   7          void digital_tube(unsigned char digital_tubeposition, unsigned char number)
   8          {
   9   1          // -------- 位选：写入到 Y6C（数码管位选锁存）--------
  10   1          switch(digital_tubeposition)
  11   1          {
  12   2              case 1:P0=0x01;break;
  13   2              case 2:P0=0x02;break;
  14   2              case 3:P0=0x04;break;
  15   2              case 4:P0=0x08;break;
  16   2              case 5:P0=0x10;break;
  17   2              case 6:P0=0x20;break;
  18   2              case 7:P0=0x40;break;
  19   2              case 8:P0=0x80;break;
  20   2              default:P0=0xFF;break;
  21   2          }
  22   1          P2 = (P2 & 0x1F) | 0xC0;   // 选通 Y6C
  23   1          P2 &= 0x1F;                // 关闭选通
  24   1      
  25   1          // -------- 段码：写入到 Y7C（数码管段选锁存）--------
  26   1          P0 = digital_tubenumber[number & 0x0F];
  27   1          P2 = (P2 & 0x1F) | 0xE0;   // 选通 Y7C
  28   1          P2 &= 0x1F;                // 关闭选通
  29   1      
  30   1          delay(2);
  31   1      
  32   1      /* -------- 消影（补的只有这里）-------- */
  33   1              P0 = 0xFF;                     // 段码全灭
  34   1              P2 = (P2 & 0x1F) | 0xE0;       // Y7C 段选锁存
  35   1              P2 &= 0x1F;                    // 关闭选通
  36   1      
  37   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    141    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
