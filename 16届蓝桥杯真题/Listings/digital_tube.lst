C51 COMPILER V9.57.0.0   DIGITAL_TUBE                                                      02/09/2026 17:53:14 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE DIGITAL_TUBE
OBJECT MODULE PLACED IN .\Objects\digital_tube.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE digital_tube.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\digital_tube.lst) OBJECT(.\Objects\digital_tube.obj)

line level    source

   1          
   2          // Header:数码管驱动程序
   3          // File Name: 
   4          // Author:WYC
   5          // Date:2026 1.27
   6          
   7          #include <STC15F2K60S2.H>
   8          #include "delay.h"
   9          
  10          
  11          unsigned char digitaltube_number[16]={0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0x88,0x83,0xC6,0xA
             -1,0x86,0x8E};
  12          //n=16，L=17，P=18；
  13          void digital_tubefixed(unsigned char digitaltube_position, unsigned char number)
  14          {
  15   1          // -------- 位选：写入到 Y6C（数码管位选锁存）--------
  16   1          switch(digitaltube_position)
  17   1          {
  18   2              case 1:P0=0x01;break;
  19   2              case 2:P0=0x02;break;
  20   2              case 3:P0=0x04;break;
  21   2              case 4:P0=0x08;break;
  22   2              case 5:P0=0x10;break;
  23   2              case 6:P0=0x20;break;
  24   2              case 7:P0=0x40;break;
  25   2              case 8:P0=0x80;break;
  26   2                      case 9:P0=0x90;break;
  27   2                      case 10:P0=0x88;break;
  28   2                      case 11:P0=0x83;break;
  29   2                      case 12:P0=0xC6;break;
  30   2                      case 13:P0=0xA1;break;
  31   2                      case 14:P0=0x86;break;
  32   2                      case 15:P0=0x8E;break;
  33   2              default:P0=0xFF;break;
  34   2          }
  35   1          P2 = (P2 & 0x1F) | 0xC0;   // 选通 Y6C
  36   1          P2 &= 0x1F;                // 关闭选通
  37   1      
  38   1          // -------- 段码：写入到 Y7C（数码管段选锁存）--------
  39   1              P0 = digitaltube_number[number];
  40   1          P2 = (P2 & 0x1F) | 0xE0;   // 选通 Y7C
  41   1          P2 &= 0x1F;                // 关闭选通
  42   1      
  43   1          delay(2);
  44   1      
  45   1      /* -------- 消影（补的只有这里）-------- */
  46   1              P0 = 0xFF;                     // 段码全灭
  47   1              P2 = (P2 & 0x1F) | 0xE0;       // Y7C 段选锁存
  48   1              P2 &= 0x1F;                    // 关闭选通
  49   1      
  50   1      }
  51          void digital_tube(unsigned char digitaltube_position, unsigned char Code)
  52          {
  53   1          // -------- 位选：写入到 Y6C（数码管位选锁存）--------
C51 COMPILER V9.57.0.0   DIGITAL_TUBE                                                      02/09/2026 17:53:14 PAGE 2   

  54   1          switch(digitaltube_position)
  55   1          {
  56   2              case 1:P0=0x01;break;
  57   2              case 2:P0=0x02;break;
  58   2              case 3:P0=0x04;break;
  59   2              case 4:P0=0x08;break;
  60   2              case 5:P0=0x10;break;
  61   2              case 6:P0=0x20;break;
  62   2              case 7:P0=0x40;break;
  63   2              case 8:P0=0x80;break;
  64   2                      case 9:P0=0x90;break;
  65   2                      case 10:P0=0x88;break;
  66   2                      case 11:P0=0x83;break;
  67   2                      case 12:P0=0xC6;break;
  68   2                      case 13:P0=0xA1;break;
  69   2                      case 14:P0=0x86;break;
  70   2                      case 15:P0=0x8E;break;
  71   2              default:P0=0xFF;break;
  72   2          }
  73   1          P2 = (P2 & 0x1F) | 0xC0;   // 选通 Y6C
  74   1          P2 &= 0x1F;                // 关闭选通
  75   1      
  76   1          // -------- 段码：写入到 Y7C（数码管段选锁存）--------
  77   1              P0 = Code;
  78   1          P2 = (P2 & 0x1F) | 0xE0;   // 选通 Y7C
  79   1          P2 &= 0x1F;                // 关闭选通
  80   1      
  81   1          delay(2);
  82   1      
  83   1      /* -------- 消影（补的只有这里）-------- */
  84   1              P0 = 0xFF;                     // 段码全灭
  85   1              P2 = (P2 & 0x1F) | 0xE0;       // Y7C 段选锁存
  86   1              P2 &= 0x1F;                    // 关闭选通
  87   1      
  88   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    391    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
