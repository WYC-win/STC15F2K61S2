C51 COMPILER V9.57.0.0   MAIN                                                              01/25/2026 16:18:49 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <STC15F2K60S2.H>
   2          
   3          void Delay100ms(void)   //@12.000MHz
   4          {
   5   1              unsigned char data i, j, k;
   6   1      
   7   1              _nop_();
   8   1              _nop_();
   9   1              i = 5;
  10   1              j = 144;
  11   1              k = 71;
  12   1              do
  13   1              {
  14   2                      do
  15   2                      {
  16   3                              while (--k);
  17   3                      } while (--j);
  18   2              } while (--i);
  19   1      }
  20          
  21          unsigned long D;
  22          void UART_SendByte(unsigned char Byte)
  23          {
  24   1              SBUF=Byte;
  25   1              while(TI==0);
  26   1              //Delay(1)
  27   1              TI=0;
  28   1      }
  29          
  30          void Uart1_Isr(void) interrupt 4
  31          {
  32   1              if (RI==1)                              //检测串口1接收中断
  33   1              {
  34   2      //              P0=~SBUF;
  35   2      //              UART_SendByte(SBUF);
  36   2      //              D=strtol(SBUF,NULL,16);
  37   2                      RI = 0;
  38   2                      
  39   2                      if (SBUF & 0x01) 
  40   2                      {
  41   3                              while(1)
  42   3                              {
  43   4                                      P0=0xFE;
  44   4                                      Delay100ms();
  45   4                                      P0=0xFF;
  46   4                                      Delay100ms();
  47   4                                      if(RI==1)break;
  48   4                              }
  49   3                                      
  50   3                      }
  51   2                      else
  52   2                      {
  53   3                              while(1)
  54   3                              {
C51 COMPILER V9.57.0.0   MAIN                                                              01/25/2026 16:18:49 PAGE 2   

  55   4                                      P0=0xFF;
  56   4                                      if(RI==1)break;
  57   4                              }
  58   3                      }
  59   2              }       
  60   1      }
  61          
  62          
  63          
  64          void Uart1_Init(void)   //9600bps@12.000MHz
  65          {
  66   1              SCON = 0x50;            //8位数据,可变波特率
  67   1              AUXR |= 0x01;           //串口1选择定时器2为波特率发生器
  68   1              AUXR |= 0x04;           //定时器时钟1T模式
  69   1              T2L = 0xC7;                     //设置定时初始值
  70   1              T2H = 0xFE;                     //设置定时初始值
  71   1              AUXR |= 0x10;           //定时器2开始计时
  72   1              ES = 1;                         //使能串口1中断
  73   1              EA=1;
  74   1      }
  75          
  76          void main()
  77          {
  78   1              Uart1_Init();
  79   1              WR=0;
  80   1              P25=0;
  81   1              P26=0;
  82   1              P27=1;
  83   1              while(1)
  84   1              {
  85   2              
  86   2              }
  87   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    116    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
